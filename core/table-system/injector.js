function _0x501e(_0x115e7b,_0x3d1b68){const _0x3ed513=_0x3ed5();return _0x501e=function(_0x501e0e,_0x28a645){_0x501e0e=_0x501e0e-0x6b;let _0x4ced01=_0x3ed513[_0x501e0e];return _0x4ced01;},_0x501e(_0x115e7b,_0x3d1b68);}const _0x26b73c=_0x501e;(function(_0xbca4b,_0x43bfe1){const _0x61e34c=_0x501e,_0x4e3da3=_0xbca4b();while(!![]){try{const _0x425f67=parseInt(_0x61e34c(0x7c))/0x1*(-parseInt(_0x61e34c(0x70))/0x2)+parseInt(_0x61e34c(0x6c))/0x3*(parseInt(_0x61e34c(0x85))/0x4)+-parseInt(_0x61e34c(0x6e))/0x5+parseInt(_0x61e34c(0x73))/0x6*(-parseInt(_0x61e34c(0x7b))/0x7)+-parseInt(_0x61e34c(0x86))/0x8*(parseInt(_0x61e34c(0x7a))/0x9)+-parseInt(_0x61e34c(0x80))/0xa*(parseInt(_0x61e34c(0x71))/0xb)+parseInt(_0x61e34c(0x79))/0xc;if(_0x425f67===_0x43bfe1)break;else _0x4e3da3['push'](_0x4e3da3['shift']());}catch(_0x27a0da){_0x4e3da3['push'](_0x4e3da3['shift']());}}}(_0x3ed5,0x3fac3));import{setExtensionPrompt}from'/script.js';function _0x3ed5(){const _0x58cca6=['6042YEZqYJ','##以下内容是故事发生的剧情中提取出的内容，已经转化为表格形式呈现给你，请将以下内容作为后续剧情的一部分参考：\x0a{{{Amily2TableDataContent}}}','1687100WrqOGX','trim','4xprSsA','596860VBHZXz',',\x20深度:\x20','24YTyKxK','{{{Amily2TableData}}}','secondary-api','AMILY2_TABLE_SYSTEM','table_injection_depth','table_injection_enabled','12984768hRAiiY','9aIBIod','463918mdhirA','37850eVDQYH','SYSTEM','[Amily2-表格注入器]\x20注入表格数据时发生错误:','table_injection_position','20VJxgep','error','quiet','{{{Amily2TableDataContent}}}','filling_mode','36aYfebp','421208qlbTnz','replace'];_0x3ed5=function(){return _0x58cca6;};return _0x3ed5();}import{extension_settings}from'/scripts/extensions.js';import{getBatchFillerFlowTemplate,convertTablesToCsvString,convertTablesToCsvStringForContentOnly}from'./manager.js';import{tableSystemDefaultSettings}from'./settings.js';import{extensionName}from'../../utils/settings.js';const INJECTION_KEY=_0x26b73c(0x76);export function injectTableData(_0x1e06d5,_0x357e9f,_0x3e852e,_0x463b55){const _0x2080bb=_0x26b73c,_0x15545e=extension_settings[extensionName]||{};if(_0x463b55===_0x2080bb(0x82))return;if(!_0x15545e[_0x2080bb(0x78)]){setExtensionPrompt(INJECTION_KEY,'',0x0,0x0,![],_0x2080bb(0x7d));return;}try{let _0x4ba65d='';const _0x2d25d2=_0x15545e[_0x2080bb(0x84)]||'main-api';if(_0x2d25d2===_0x2080bb(0x75)){const _0x3e27d3=_0x2080bb(0x6d),_0xc2c5c3=convertTablesToCsvStringForContentOnly();_0xc2c5c3[_0x2080bb(0x6f)]()&&(_0x4ba65d=_0x3e27d3['replace'](_0x2080bb(0x83),_0xc2c5c3));}else{if(_0x2d25d2==='optimized'){const _0x4ad8de='##以下内容是故事发生的剧情中提取出的内容，已经转化为表格形式呈现给你，请将以下内容作为后续剧情的一部分参考：\x0a{{{Amily2TableDataContent}}}',_0x2b30d6=convertTablesToCsvStringForContentOnly();_0x2b30d6['trim']()&&(_0x4ba65d=_0x4ad8de[_0x2080bb(0x6b)](_0x2080bb(0x83),_0x2b30d6));}else{const _0x2a945c=getBatchFillerFlowTemplate(),_0x3e5fc9=convertTablesToCsvString();_0x2a945c&&_0x3e5fc9['trim']()&&(_0x4ba65d=_0x2a945c[_0x2080bb(0x6b)](_0x2080bb(0x74),_0x3e5fc9));}}if(!_0x4ba65d){setExtensionPrompt(INJECTION_KEY,'',0x0,0x0,![],'SYSTEM');return;}const _0x3dc8d6=parseInt(_0x15545e[_0x2080bb(0x7f)],0xa),_0xad6e4f=parseInt(_0x15545e[_0x2080bb(0x77)],0xa),_0x589341=parseInt(_0x15545e['table_injection_role'],0xa);setExtensionPrompt(INJECTION_KEY,_0x4ba65d,_0x3dc8d6,_0xad6e4f,![],_0x589341),console['log']('[Amily2-表格注入器]\x20已成功注入表格数据\x20(位置:\x20'+_0x3dc8d6+_0x2080bb(0x72)+_0xad6e4f+',\x20角色:\x20'+_0x589341+')。');}catch(_0x2bfe28){console[_0x2080bb(0x81)](_0x2080bb(0x7e),_0x2bfe28);}}
