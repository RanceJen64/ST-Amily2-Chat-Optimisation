const _0x103513=_0x2bc7;function _0x2bc7(_0x545295,_0x48777f){const _0x532019=_0x5320();return _0x2bc7=function(_0x2bc745,_0x50dff8){_0x2bc745=_0x2bc745-0x8b;let _0x3dab87=_0x532019[_0x2bc745];return _0x3dab87;},_0x2bc7(_0x545295,_0x48777f);}(function(_0x3ffd65,_0x269c2f){const _0x1aa436=_0x2bc7,_0x2a273a=_0x3ffd65();while(!![]){try{const _0x25b514=parseInt(_0x1aa436(0x9e))/0x1+parseInt(_0x1aa436(0x8d))/0x2+parseInt(_0x1aa436(0x92))/0x3*(parseInt(_0x1aa436(0x97))/0x4)+parseInt(_0x1aa436(0x9a))/0x5*(parseInt(_0x1aa436(0x8c))/0x6)+-parseInt(_0x1aa436(0x9f))/0x7*(parseInt(_0x1aa436(0x9b))/0x8)+parseInt(_0x1aa436(0xa4))/0x9*(-parseInt(_0x1aa436(0xa3))/0xa)+parseInt(_0x1aa436(0x96))/0xb*(-parseInt(_0x1aa436(0x8b))/0xc);if(_0x25b514===_0x269c2f)break;else _0x2a273a['push'](_0x2a273a['shift']());}catch(_0x24b6a9){_0x2a273a['push'](_0x2a273a['shift']());}}}(_0x5320,0x7103a));import{setExtensionPrompt}from'/script.js';import{extension_settings}from'/scripts/extensions.js';function _0x5320(){const _0x2f0028=['219278tpdLmP',',\x20深度:\x20','quiet','AMILY2_TABLE_SYSTEM','table_injection_enabled','9EhOONm',',\x20角色:\x20','[Amily2-表格注入器]\x20已成功注入表格数据\x20(位置:\x20','table_injection_depth','9740533UtjTXl','1067612jPBdQf','[Amily2-表格注入器]\x20注入表格数据时发生错误:','SYSTEM','965DPqtAf','8WuyduD','table_injection_position','log','565281AJqoXZ','6441897jJwPZj','replace','{{{Amily2TableData}}}','trim','656060FkzJmQ','9qPciiu','error','12bzNdpj','26694CNMbod'];_0x5320=function(){return _0x2f0028;};return _0x5320();}import{getAiFlowTemplateForInjection,convertTablesToCsvString}from'./manager.js';import{tableSystemDefaultSettings}from'./settings.js';import{extensionName}from'../../utils/settings.js';const INJECTION_KEY=_0x103513(0x90);export function injectTableData(_0x3e1e9b,_0x49b135,_0x3bf330,_0x599e27){const _0x3a3a91=_0x103513,_0x2145f1=extension_settings[extensionName]||{};if(_0x599e27===_0x3a3a91(0x8f))return;if(!_0x2145f1[_0x3a3a91(0x91)]){setExtensionPrompt(INJECTION_KEY,'',0x0,0x0,![],'SYSTEM');return;}try{const _0x51d75c=getAiFlowTemplateForInjection(),_0xc82484=convertTablesToCsvString();if(!_0x51d75c||!_0xc82484[_0x3a3a91(0xa2)]()){setExtensionPrompt(INJECTION_KEY,'',0x0,0x0,![],_0x3a3a91(0x99));return;}const _0x2addf5=_0x51d75c[_0x3a3a91(0xa0)](_0x3a3a91(0xa1),_0xc82484),_0x466fb8=parseInt(_0x2145f1[_0x3a3a91(0x9c)],0xa),_0x11fd0c=parseInt(_0x2145f1[_0x3a3a91(0x95)],0xa),_0x3c3efa=parseInt(_0x2145f1['table_injection_role'],0xa);setExtensionPrompt(INJECTION_KEY,_0x2addf5,_0x466fb8,_0x11fd0c,![],_0x3c3efa),console[_0x3a3a91(0x9d)](_0x3a3a91(0x94)+_0x466fb8+_0x3a3a91(0x8e)+_0x11fd0c+_0x3a3a91(0x93)+_0x3c3efa+')。');}catch(_0x275e93){console[_0x3a3a91(0xa5)](_0x3a3a91(0x98),_0x275e93);}}