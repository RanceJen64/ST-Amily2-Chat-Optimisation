const _0x174347=_0x55f1;(function(_0x3190c9,_0x3306d5){const _0x5e31b7=_0x55f1,_0x21ab4d=_0x3190c9();while(!![]){try{const _0x3101c0=parseInt(_0x5e31b7(0x269))/0x1*(parseInt(_0x5e31b7(0x26e))/0x2)+-parseInt(_0x5e31b7(0x1f8))/0x3+-parseInt(_0x5e31b7(0x1c6))/0x4+-parseInt(_0x5e31b7(0x222))/0x5+parseInt(_0x5e31b7(0x239))/0x6+-parseInt(_0x5e31b7(0x1ad))/0x7*(parseInt(_0x5e31b7(0x27c))/0x8)+-parseInt(_0x5e31b7(0x204))/0x9*(-parseInt(_0x5e31b7(0x1b8))/0xa);if(_0x3101c0===_0x3306d5)break;else _0x21ab4d['push'](_0x21ab4d['shift']());}catch(_0x543fb8){_0x21ab4d['push'](_0x21ab4d['shift']());}}}(_0x892a,0xbf65f));import{getContext,extension_settings}from'/scripts/extensions.js';import{saveChat,saveSettingsDebounced}from'/script.js';import{log}from'./logger.js';import{getChatPiece,saveChatDebounced}from'../../utils/utils.js';import{extensionName}from'../../utils/settings.js';import{DEFAULT_AI_RULE_TEMPLATE,DEFAULT_AI_FLOW_TEMPLATE}from'./settings.js';const TABLE_DATA_KEY=_0x174347(0x26a);let currentTablesState=null;export function setMemoryState(_0xf1d69a){currentTablesState=_0xf1d69a;}export function getMemoryState(){return currentTablesState;}const defaultTemplate={'tables':[{'name':_0x174347(0x1f1),'headers':['日期','时段','时间','地点',_0x174347(0x21c)],'note':_0x174347(0x1b4),'rule_add':'此表不存在任何一行时','rule_delete':_0x174347(0x265),'rule_update':_0x174347(0x272),'rows':[]},{'name':_0x174347(0x20d),'headers':[_0x174347(0x201),'外貌','身体','衣着','性格','身份','职业',_0x174347(0x276),'对<user>态度','爱好','住所',_0x174347(0x1b5)],'note':_0x174347(0x1fa),'rule_add':_0x174347(0x262),'rule_delete':_0x174347(0x1e1),'rule_update':_0x174347(0x22a),'rows':[]},{'name':_0x174347(0x225),'headers':['任务名','类型','详情','状态',_0x174347(0x244),'地点','结果',_0x174347(0x230),_0x174347(0x1e7)],'note':_0x174347(0x1d2),'rule_add':_0x174347(0x26d),'rule_delete':_0x174347(0x1d7),'rule_update':_0x174347(0x22c),'rows':[]},{'name':_0x174347(0x1ff),'headers':['物品名','类型','详情','状态','拥有者',_0x174347(0x217)],'note':'对某人很贵重或有特殊纪念意义的物品','rule_add':_0x174347(0x211),'rule_delete':'消耗品彻底使用完后/一次性物品被使用后','rule_update':_0x174347(0x248),'rows':[]},{'name':_0x174347(0x1f6),'headers':['类型',_0x174347(0x23e)],'note':_0x174347(0x1f3),'rule_add':'上层叙事者在第四面墙外对故事或游戏进行提示、要求、命令时/上层叙事者使用括号包裹提示、要求、命令时','rule_delete':_0x174347(0x219),'rule_update':_0x174347(0x1bc),'rows':[]}]};function getDefaultTables(){const _0x2eda37=_0x174347;return log(_0x2eda37(0x1b7),_0x2eda37(0x221)),JSON['parse'](JSON[_0x2eda37(0x279)](defaultTemplate[_0x2eda37(0x250)]));}export function loadTables(_0x9033b7=-0x1){const _0x52a20d=_0x174347,_0x2842aa=getContext();if(!_0x2842aa||!_0x2842aa[_0x52a20d(0x267)]||_0x2842aa[_0x52a20d(0x267)][_0x52a20d(0x1e9)]===0x0)return currentTablesState=getDefaultTables(),currentTablesState;const _0xea8b4c=_0x9033b7===-0x1?_0x2842aa[_0x52a20d(0x267)][_0x52a20d(0x1e9)]-0x1:_0x9033b7-0x1;if(_0xea8b4c<0x0)return currentTablesState=getDefaultTables(),currentTablesState;for(let _0x40bccc=_0xea8b4c;_0x40bccc>=0x0;_0x40bccc--){const _0x213376=_0x2842aa[_0x52a20d(0x267)][_0x40bccc];if(_0x213376[_0x52a20d(0x1ae)]&&_0x213376[_0x52a20d(0x1ae)][TABLE_DATA_KEY]){log(_0x52a20d(0x1d8)+_0x40bccc+_0x52a20d(0x1ed),_0x52a20d(0x221));let _0x74546f=JSON[_0x52a20d(0x25e)](JSON['stringify'](_0x213376[_0x52a20d(0x1ae)][TABLE_DATA_KEY]));return _0x74546f[_0x52a20d(0x207)](_0x4ccbd8=>{const _0x4f0b6c=_0x52a20d;if(_0x4ccbd8[_0x4f0b6c(0x27d)]===undefined)_0x4ccbd8[_0x4f0b6c(0x27d)]='无';if(_0x4ccbd8[_0x4f0b6c(0x237)]===undefined)_0x4ccbd8[_0x4f0b6c(0x237)]='允许';if(_0x4ccbd8['rule_delete']===undefined)_0x4ccbd8[_0x4f0b6c(0x257)]='允许';if(_0x4ccbd8[_0x4f0b6c(0x259)]===undefined)_0x4ccbd8[_0x4f0b6c(0x259)]='允许';}),currentTablesState=_0x74546f,currentTablesState;}}return log('未在聊天记录中找到表格数据，使用默认模板。',_0x52a20d(0x221)),currentTablesState=getDefaultTables(),currentTablesState;}export function saveStateToMessage(_0x471639,_0x453189){const _0x396716=_0x174347;if(!_0x471639||!_0x453189)return log('缺少状态或目标消息，无法保存。','error'),![];return!_0x453189[_0x396716(0x1ae)]&&(_0x453189[_0x396716(0x1ae)]={}),_0x453189[_0x396716(0x1ae)][TABLE_DATA_KEY]=JSON[_0x396716(0x25e)](JSON[_0x396716(0x279)](_0x471639)),log(_0x396716(0x1de)+_0x453189[_0x396716(0x1f4)]['substring'](0x0,0x14)+_0x396716(0x1ea),'info'),!![];}export function saveTables(_0x3f5393='未知操作'){const _0x405cd0=_0x174347;return log(_0x405cd0(0x261)+_0x3f5393+_0x405cd0(0x228),_0x405cd0(0x221)),!![];}export function deleteColumn(_0x507748,_0x3fdda9){const _0x25af31=_0x174347,_0x17eb42=getMemoryState();if(!_0x17eb42[_0x507748]||_0x3fdda9<0x0||_0x3fdda9>=_0x17eb42[_0x507748]['headers'][_0x25af31(0x1e9)]){log(_0x25af31(0x232)+_0x507748+_0x25af31(0x277)+_0x3fdda9+_0x25af31(0x1ac),_0x25af31(0x1b3));return;}_0x17eb42[_0x507748]['headers'][_0x25af31(0x252)](_0x3fdda9,0x1),_0x17eb42[_0x507748]['rows'][_0x25af31(0x207)](_0x504ba0=>{const _0xf57f8c=_0x25af31;_0x504ba0[_0xf57f8c(0x1e9)]>_0x3fdda9&&_0x504ba0['splice'](_0x3fdda9,0x1);}),log(_0x25af31(0x255)+_0x507748+_0x25af31(0x223)+(_0x3fdda9+0x1)+_0x25af31(0x226),_0x25af31(0x1e4)),saveTables(_0x17eb42);}function _0x55f1(_0x513d16,_0x1c6409){const _0x892a10=_0x892a();return _0x55f1=function(_0x55f1d4,_0x423f52){_0x55f1d4=_0x55f1d4-0x1ab;let _0x502572=_0x892a10[_0x55f1d4];return _0x502572;},_0x55f1(_0x513d16,_0x1c6409);}export function moveRow(_0x373b2f,_0x3b5f1a,_0x1e8580){const _0x31388d=_0x174347,_0x47d64c=getMemoryState(),_0x38971e=_0x47d64c[_0x373b2f];if(!_0x38971e||_0x3b5f1a<0x0||_0x3b5f1a>=_0x38971e[_0x31388d(0x278)][_0x31388d(0x1e9)])return;const _0x3fa126=_0x1e8580==='up'?_0x3b5f1a-0x1:_0x3b5f1a+0x1;if(_0x3fa126<0x0||_0x3fa126>=_0x38971e['rows'][_0x31388d(0x1e9)])return;const [_0x3fb970]=_0x38971e['rows'][_0x31388d(0x252)](_0x3b5f1a,0x1);_0x38971e[_0x31388d(0x278)]['splice'](_0x3fa126,0x0,_0x3fb970),log(_0x31388d(0x238)+_0x373b2f+_0x31388d(0x223)+(_0x3b5f1a+0x1)+_0x31388d(0x1e5)+(_0x3fa126+0x1)+'\x20行。',_0x31388d(0x1e4)),saveTables(_0x47d64c);}export function insertRow(_0x536b57,_0xe9b135,_0x21411b=_0x174347(0x27a)){const _0x266fd4=_0x174347,_0x3ac742=getMemoryState(),_0x8d4665=_0x3ac742[_0x536b57];if(!_0x8d4665){log(_0x266fd4(0x208)+_0x536b57+_0x266fd4(0x253),_0x266fd4(0x1b3));return;}const _0x2934c0=new Array(_0x8d4665[_0x266fd4(0x23f)][_0x266fd4(0x1e9)])[_0x266fd4(0x202)]('');if(typeof _0xe9b135===_0x266fd4(0x215)&&_0xe9b135!==null)for(const _0x1f3d64 in _0xe9b135){const _0x503697=parseInt(_0x1f3d64,0xa);!isNaN(_0x503697)&&_0x503697<_0x2934c0[_0x266fd4(0x1e9)]&&(_0x2934c0[_0x503697]=_0xe9b135[_0x1f3d64]);}let _0x5ea4f4;typeof _0xe9b135===_0x266fd4(0x1fc)?_0x5ea4f4=_0x21411b===_0x266fd4(0x1e6)?_0xe9b135:_0xe9b135+0x1:_0x5ea4f4=_0x8d4665[_0x266fd4(0x278)][_0x266fd4(0x1e9)];if(_0x5ea4f4<0x0)_0x5ea4f4=0x0;if(_0x5ea4f4>_0x8d4665[_0x266fd4(0x278)][_0x266fd4(0x1e9)])_0x5ea4f4=_0x8d4665['rows'][_0x266fd4(0x1e9)];_0x8d4665[_0x266fd4(0x278)]['splice'](_0x5ea4f4,0x0,_0x2934c0),log(_0x266fd4(0x254)+_0x8d4665['name']+'\x20(索引\x20'+_0x536b57+_0x266fd4(0x233)+(_0x5ea4f4+0x1)+_0x266fd4(0x24a),'success');const _0x518414=getContext();if(_0x518414[_0x266fd4(0x267)]&&_0x518414['chat'][_0x266fd4(0x1e9)]>0x0){const _0x592706=_0x518414[_0x266fd4(0x267)][_0x518414[_0x266fd4(0x267)]['length']-0x1];if(saveStateToMessage(_0x3ac742,_0x592706)){saveChat();return;}}saveChatDebounced();}export function addRow(_0x3f98ae){const _0x69155=_0x174347;if(!currentTablesState||!currentTablesState[_0x3f98ae])return;const _0x4d29cb=currentTablesState[_0x3f98ae],_0x3a9447=_0x4d29cb[_0x69155(0x23f)]['length'],_0xffcc12=Array(_0x3a9447)['fill']('');_0x4d29cb[_0x69155(0x278)][_0x69155(0x1f7)](_0xffcc12);const _0x1c3a33=_0x69155(0x26b)+_0x4d29cb[_0x69155(0x25c)]+_0x69155(0x236);log(_0x1c3a33,'info');const _0x57921e=getContext();if(_0x57921e['chat']&&_0x57921e[_0x69155(0x267)]['length']>0x0){const _0x4633a5=_0x57921e[_0x69155(0x267)][_0x57921e['chat'][_0x69155(0x1e9)]-0x1];if(saveStateToMessage(currentTablesState,_0x4633a5)){saveChat();return;}}saveChatDebounced();}export function addColumn(_0x3bd0ad){const _0x256dcc=_0x174347;if(!currentTablesState||!currentTablesState[_0x3bd0ad])return;const _0x431204=currentTablesState[_0x3bd0ad],_0x2cb617=_0x256dcc(0x227)+(_0x431204['headers'][_0x256dcc(0x1e9)]+0x1);_0x431204[_0x256dcc(0x23f)][_0x256dcc(0x1f7)](_0x2cb617),_0x431204[_0x256dcc(0x278)][_0x256dcc(0x207)](_0x246e2c=>_0x246e2c[_0x256dcc(0x1f7)](''));const _0x7cfc6='表格\x20['+_0x431204[_0x256dcc(0x25c)]+_0x256dcc(0x264);log(_0x7cfc6,_0x256dcc(0x221));const _0x480115=getContext();if(_0x480115[_0x256dcc(0x267)]&&_0x480115['chat'][_0x256dcc(0x1e9)]>0x0){const _0x2fa395=_0x480115[_0x256dcc(0x267)][_0x480115['chat']['length']-0x1];if(saveStateToMessage(currentTablesState,_0x2fa395)){saveChat();return;}}saveChatDebounced();}export function updateHeader(_0x440fca,_0x3ef843,_0x130db9){const _0x2eb36f=_0x174347;if(!currentTablesState||!currentTablesState[_0x440fca]||currentTablesState[_0x440fca][_0x2eb36f(0x23f)][_0x3ef843]===undefined)return;const _0x3f3924=currentTablesState[_0x440fca][_0x2eb36f(0x25c)],_0x3191fc=currentTablesState[_0x440fca][_0x2eb36f(0x23f)][_0x3ef843];currentTablesState[_0x440fca]['headers'][_0x3ef843]=_0x130db9;const _0x2ad985=_0x2eb36f(0x26b)+_0x3f3924+_0x2eb36f(0x22b)+_0x3191fc+_0x2eb36f(0x231)+_0x130db9+'”。';log(_0x2ad985,_0x2eb36f(0x221));const _0x26551e=getContext();if(_0x26551e[_0x2eb36f(0x267)]&&_0x26551e[_0x2eb36f(0x267)]['length']>0x0){const _0xd1a4bf=_0x26551e[_0x2eb36f(0x267)][_0x26551e['chat'][_0x2eb36f(0x1e9)]-0x1];if(saveStateToMessage(currentTablesState,_0xd1a4bf)){saveChat();return;}}saveChatDebounced();}export async function deleteRow(_0xe6063d,_0xb6476c){const _0x591bd4=_0x174347;if(!currentTablesState||!currentTablesState[_0xe6063d]||!currentTablesState[_0xe6063d]['rows'][_0xb6476c])return;const _0xad770c=currentTablesState[_0xe6063d]['name'];currentTablesState[_0xe6063d][_0x591bd4(0x278)]['splice'](_0xb6476c,0x1);const _0x5a8a15='表格\x20['+_0xad770c+']\x20的第\x20'+(_0xb6476c+0x1)+_0x591bd4(0x246);log(_0x5a8a15,_0x591bd4(0x221));const _0x19dde8=getContext();if(_0x19dde8[_0x591bd4(0x267)]&&_0x19dde8['chat']['length']>0x0){const _0x830b0f=_0x19dde8[_0x591bd4(0x267)][_0x19dde8[_0x591bd4(0x267)][_0x591bd4(0x1e9)]-0x1];if(saveStateToMessage(currentTablesState,_0x830b0f)){await saveChat();return;}}await saveChatDebounced();}export function insertColumn(_0x52cad3,_0x1e2fc2,_0x308e3d){const _0x51eeb2=_0x174347;if(!currentTablesState||!currentTablesState[_0x52cad3])return;const _0x2018f5=currentTablesState[_0x52cad3],_0x445358=_0x308e3d===_0x51eeb2(0x26f)?_0x1e2fc2:_0x1e2fc2+0x1,_0x1ac33c='新列';_0x2018f5[_0x51eeb2(0x23f)][_0x51eeb2(0x252)](_0x445358,0x0,_0x1ac33c),_0x2018f5['rows'][_0x51eeb2(0x207)](_0x1d4640=>_0x1d4640[_0x51eeb2(0x252)](_0x445358,0x0,''));const _0x1a069b=_0x51eeb2(0x26b)+_0x2018f5[_0x51eeb2(0x25c)]+_0x51eeb2(0x200)+(_0x1e2fc2+0x1)+_0x51eeb2(0x260)+(_0x308e3d===_0x51eeb2(0x26f)?'左侧':'右侧')+'插入了新列。';log(_0x1a069b,'info');const _0x3722a8=getContext();if(_0x3722a8[_0x51eeb2(0x267)]&&_0x3722a8['chat']['length']>0x0){const _0x3bf7f6=_0x3722a8[_0x51eeb2(0x267)][_0x3722a8['chat'][_0x51eeb2(0x1e9)]-0x1];if(saveStateToMessage(currentTablesState,_0x3bf7f6)){saveChat();return;}}saveChatDebounced();}export function moveColumn(_0x43dfed,_0x3713c4,_0x5ca81a){const _0x123855=_0x174347;if(!currentTablesState||!currentTablesState[_0x43dfed])return;const _0x200a0b=currentTablesState[_0x43dfed],_0x41864e=_0x200a0b[_0x123855(0x23f)],_0x1ad00b=_0x200a0b[_0x123855(0x278)],_0x27d0c7=_0x5ca81a===_0x123855(0x26f)?_0x3713c4-0x1:_0x3713c4+0x1;if(_0x27d0c7<0x0||_0x27d0c7>=_0x41864e[_0x123855(0x1e9)]){log(_0x123855(0x1ef)+_0x3713c4+_0x123855(0x1f0),_0x123855(0x258));return;}const [_0x1a50be]=_0x41864e[_0x123855(0x252)](_0x3713c4,0x1);_0x41864e[_0x123855(0x252)](_0x27d0c7,0x0,_0x1a50be),_0x1ad00b[_0x123855(0x207)](_0x4eb13a=>{const _0x2bf39d=_0x123855,[_0x574595]=_0x4eb13a[_0x2bf39d(0x252)](_0x3713c4,0x1);_0x4eb13a[_0x2bf39d(0x252)](_0x27d0c7,0x0,_0x574595);});const _0x34875f='表格\x20['+_0x200a0b['name']+_0x123855(0x21b)+_0x1a50be+'”已向'+(_0x5ca81a===_0x123855(0x26f)?'左':'右')+_0x123855(0x206);log(_0x34875f,_0x123855(0x221));const _0x25b0b9=getContext();if(_0x25b0b9[_0x123855(0x267)]&&_0x25b0b9[_0x123855(0x267)][_0x123855(0x1e9)]>0x0){const _0x1a6b87=_0x25b0b9[_0x123855(0x267)][_0x25b0b9[_0x123855(0x267)][_0x123855(0x1e9)]-0x1];if(saveStateToMessage(currentTablesState,_0x1a6b87)){saveChat();return;}}saveChatDebounced();}export function deleteTable(_0x1fbd93){const _0x47df25=_0x174347;if(!currentTablesState||!currentTablesState[_0x1fbd93])return;const _0x3c2945=currentTablesState[_0x1fbd93]['name'];currentTablesState['splice'](_0x1fbd93,0x1);const _0x53c36c=_0x47df25(0x26b)+_0x3c2945+_0x47df25(0x203);log(_0x53c36c,_0x47df25(0x1e4));const _0x50c5d8=getContext();if(_0x50c5d8[_0x47df25(0x267)]&&_0x50c5d8[_0x47df25(0x267)]['length']>0x0){const _0x3df964=_0x50c5d8['chat'][_0x50c5d8[_0x47df25(0x267)][_0x47df25(0x1e9)]-0x1];if(saveStateToMessage(currentTablesState,_0x3df964)){saveChat(),log(_0x47df25(0x1dc),_0x47df25(0x1e4));return;}}log(_0x47df25(0x1c5),_0x47df25(0x1b3)),saveChatDebounced();}export function addTable(_0x3caa4b){const _0x5e37ef=_0x174347;if(!_0x3caa4b||!_0x3caa4b[_0x5e37ef(0x1ee)]()){log(_0x5e37ef(0x1d5),_0x5e37ef(0x1b3)),toastr[_0x5e37ef(0x1b3)](_0x5e37ef(0x20a),_0x5e37ef(0x210));return;}!currentTablesState&&loadTables();if(currentTablesState[_0x5e37ef(0x24c)](_0x12c2b5=>_0x12c2b5[_0x5e37ef(0x25c)]===_0x3caa4b[_0x5e37ef(0x1ee)]())){log(_0x5e37ef(0x1b9)+_0x3caa4b+_0x5e37ef(0x247),'error'),toastr['error'](_0x5e37ef(0x1dd)+_0x3caa4b+'\x22\x20的表格已存在。','创建失败');return;}const _0x3357e6={'name':_0x3caa4b['trim'](),'headers':[_0x5e37ef(0x270)],'rows':[],'note':_0x5e37ef(0x1e0),'rule_add':'允许','rule_delete':'允许','rule_update':'允许'};currentTablesState[_0x5e37ef(0x1f7)](_0x3357e6);const _0x468163=_0x5e37ef(0x1be)+_0x3caa4b[_0x5e37ef(0x1ee)]()+']。';log(_0x468163,'success');const _0x397d5c=getContext();if(_0x397d5c[_0x5e37ef(0x267)]&&_0x397d5c[_0x5e37ef(0x267)][_0x5e37ef(0x1e9)]>0x0){const _0x2f3d96=_0x397d5c[_0x5e37ef(0x267)][_0x397d5c[_0x5e37ef(0x267)][_0x5e37ef(0x1e9)]-0x1];if(saveStateToMessage(currentTablesState,_0x2f3d96)){saveChat(),log(_0x5e37ef(0x1c8),'success');return;}}log(_0x5e37ef(0x1af),_0x5e37ef(0x1b3)),saveChatDebounced();}export function moveTable(_0x2f7cf0,_0x576cc9){const _0x4ea4d3=_0x174347;if(!currentTablesState||!currentTablesState[_0x2f7cf0])return;const _0x4d3f2d=_0x576cc9==='up'?_0x2f7cf0-0x1:_0x2f7cf0+0x1;if(_0x4d3f2d<0x0||_0x4d3f2d>=currentTablesState['length']){log('无法移动表格：索引\x20'+_0x2f7cf0+_0x4ea4d3(0x1f0),_0x4ea4d3(0x258));return;}const _0x5210f1=currentTablesState[_0x2f7cf0];currentTablesState[_0x2f7cf0]=currentTablesState[_0x4d3f2d],currentTablesState[_0x4d3f2d]=_0x5210f1;const _0x4bdbcb='表格\x20['+_0x5210f1[_0x4ea4d3(0x25c)]+_0x4ea4d3(0x220);log(_0x4bdbcb,_0x4ea4d3(0x1e4));const _0x3d3442=getContext();if(_0x3d3442[_0x4ea4d3(0x267)]&&_0x3d3442[_0x4ea4d3(0x267)][_0x4ea4d3(0x1e9)]>0x0){const _0x962d97=_0x3d3442['chat'][_0x3d3442[_0x4ea4d3(0x267)][_0x4ea4d3(0x1e9)]-0x1];if(saveStateToMessage(currentTablesState,_0x962d97)){saveChat(),log(_0x4ea4d3(0x1c1),_0x4ea4d3(0x1e4));return;}}log('无法找到可锚定的消息或保存失败，顺序调整可能不会被持久化！',_0x4ea4d3(0x1b3)),saveChatDebounced();}export function updateTableRules(_0x1b211b,_0x21d5a1){const _0x526471=_0x174347;if(!currentTablesState||!currentTablesState[_0x1b211b])return;const _0xb98ec=currentTablesState[_0x1b211b];_0xb98ec['note']=_0x21d5a1[_0x526471(0x27d)],_0xb98ec[_0x526471(0x237)]=_0x21d5a1[_0x526471(0x237)],_0xb98ec[_0x526471(0x257)]=_0x21d5a1[_0x526471(0x257)],_0xb98ec[_0x526471(0x259)]=_0x21d5a1[_0x526471(0x259)];const _0x2dbb23='表格\x20['+_0xb98ec[_0x526471(0x25c)]+_0x526471(0x234);log(_0x2dbb23,'info');const _0x65a017=getContext();if(_0x65a017[_0x526471(0x267)]&&_0x65a017[_0x526471(0x267)][_0x526471(0x1e9)]>0x0){const _0x3236ca=_0x65a017[_0x526471(0x267)][_0x65a017[_0x526471(0x267)][_0x526471(0x1e9)]-0x1];if(saveStateToMessage(currentTablesState,_0x3236ca)){saveChat();return;}}saveChatDebounced();}function _0x892a(){const _0x46ee7a=['与<user>关系','\x20中找不到索引为\x20','rows','stringify','below','files','763160MnHBaL','note','所有AI指令已成功执行完毕。','\x20的列。','98BSIvgW','extra','无法找到可锚定的消息或保存失败，新表格可能不会被持久化！',',\x20rowIndex=','Amily2-','导入的预设已强制写入最新消息并立即保存。','error','记录时空信息的表格，应保持在一行/日期信息应精确到至几年几月几日（如果日期未知，应随便胡编一个日期）/时段规定（凌晨：0时至5时；早晨：5时至8时；上午：8时至11时；中午：11时至13时；下午：13时至16时；傍晚：16时至19时；晚上：19时至24时）/时间信息应精确至几时几分（如果时间未知，应随便胡编一个时间）/地点应为当前叙述的地点，且约精确越好','其他重要信息','appendChild','从预设模板生成默认表格...','13592730IwNFpt','无法创建表格：名为\x20\x22','join','所有表格的行数据已在内存中清空。','上层叙事者明确要求需要修改时','AI指令块为空，无需执行任何操作。','已成功创建新表格：[','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','createElement','表格顺序调整后的状态已强制写入最新消息并立即保存。','toISOString',']\x20的第\x20','执行AI指令:\x20updateRow(tableIndex=','无法找到可锚定的消息或保存失败，删除操作可能不会被持久化！','1228628mRzVrJ','\x20行。','新表格状态已强制写入最新消息并立即保存。','createObjectURL','fromCharCode','【删除】:\x20','map','href','filter','准备执行从AI返回的\x20','getPrototypeOf','amily2-force-ui-reload','记录已完成或进展中重要、关键事情的任务、命令、约定/禁止记录不重要、不关键的事情/开始和结束时间应精确至具体日期、时段、时间','body',']\x20末尾新增一行。','无法创建表格：名称不能为空。','预设已成功导入！','冻结留存/禁止删除','在第\x20','download','纯净预设','执行AI指令时出错:\x20','废黜表格后的状态已强制写入最新消息并立即保存。','名为\x20\x22','表格状态已准备写入消息\x20[','removeChild','这是一个新创建的表格。','角色明确死亡且以后绝不会再出场时','执行AI指令:\x20deleteRow(tableIndex=','导出成功','success','\x20行移动到第\x20','above','结束时间','click','length','...]','【增加】:\x20','constructor','\x20条消息中找到基准表格数据。','trim','无法移动列：索引\x20','\x20已在边界。','时空栏','aiRuleTemplate','上层叙事者留下的各种提示、要求、命令/禁止私自增、删、改','mes','input','公告栏','push','3840102Mhgpei','revokeObjectURL','角色的基础信息csv表格，思考本轮有否有其中的角色，他应作出什么反应/外貌指：五官、面容、肤色、发型等/身体指：体型、身材、肤色、罩杯等/衣着指：身上的穿戴、服装的式样等/身份指：出身、社会地位等/职业指职责、岗位等/与<user>关系指：角色与<user>的社会关系（如：父亲、母亲、姐姐、妻子等）/爱好指：拥有浓厚兴趣和喜爱的某种事物、人物、活动/住所指：经常居住地','Amily2-Table-Preset-v3.0-separated_templates','number','【修改】:\x20','导入操作已取消。','物品栏',']\x20在第\x20','角色名','fill',']\x20已被成功废黜。','27ElbXWj','batchFillerRuleTemplate','移动。','forEach','插入行失败：找不到索引为\x20','】已成功导出。','表格名称不能为空。','文件格式无效或缺少版本号/表格数据。','\x0a---\x0a','角色栏','application/json','amily2_ai_template','创建失败','当某人获得贵重或含有特殊意义的物品时/当某个已有物品获得特殊意义时','执行失败','导入成功','操作完成','object','onchange','重要原因','未在AI返回内容中找到有效的\x20<Amily2Edit>\x20指令块。','上层叙事者明确要求需要删除时','toString',']\x20的列“','此地角色','aiTemplate','导入失败：','AI返回内容为空，无法更新表格。',']\x20的顺序已调整。','info','6650510xXfnLk','\x20的第\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20{\x20insertRow,\x20deleteRow,\x20updateRow\x20}\x20=\x20runner;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','任务栏','\x20列。','新列\x20','\x22\x20已更新内存状态。','无法找到可锚定的消息或保存失败，清空操作可能不会被持久化！','当角色的外貌、身体、衣着出现持久性变化时（如：五官长开、伤痕、减肥、染发、更衣、衣物破损等）/当角色有新的身份、职业、爱好时/当角色和<user>的关系改变时/当角色更换住所时/当角色提到重要信息时',']\x20的表头“','当大家赴约时/任务或命令有进展、完成、失败时/任务、命令、约定被取消时','batchFillerFlowTemplate','rowIndex,','\x0a*\x20','开始时间','”已更新为“','删除列失败：在表格\x20',')\x20的第\x20',']\x20的规则已更新。','【说明】:\x0a',']\x20新增了一行。','rule_add','成功将表格\x20','293340BUHtKT','清空行数据后的状态已强制写入最新消息并立即保存。','slice','【警告】\x0a\x0a导入操作将完全覆盖您当前的AI指令模板和所有表格（包括结构和内容）。\x0a\x0a此操作不可逆，是否确定要继续？','target','具体描述','headers','dispatchEvent','message','readAsText','batch_filler_rule_template','执行者','onload','\x20行已删除。','\x22\x20的表格已存在。','物品发生变化时/消耗品产生损耗时','】已开始下载。','\x20行位置插入了新行。','AI指令错误：尝试在不存在的表格索引\x20','some',',\x20data=','无法清空：当前表格状态为空。','runner','tables','aiFlowTemplate','splice','\x20的表格。','成功在表格\x20','成功删除了表格\x20','导入的表格数据格式不正确:\x20','rule_delete','warn','rule_update','Amily2-Table-Preset-v2.0-full','导入预设失败:\x20','name','\x20中操作。','parse','injectionFlowTemplate','\x20列的','UI操作\x20\x22','当本轮出现表中没有的新角色时，应插入','isArray',']\x20新增了一列。','此表大于一行时应删除多余行','result','chat','batch_filler_flow_template','47899XKeBdU','amily2_tables_data','表格\x20[','.json','当特定时间约定一起去做某件重要、关键的事时/某角色收到做某件重要、关键事情的命令或任务时/某角色确定执行某件重要、关键的事时','38buETgn','left','新列\x201','accept','当叙述的场景、时间、人物变更时','function','version','AI\x20指令更新了表格\x20['];_0x892a=function(){return _0x46ee7a;};return _0x892a();}export function updateRow(_0x5ea083,_0x2bb3bd,_0x1d5360){const _0x3cca5b=_0x174347;if(!currentTablesState||!currentTablesState[_0x5ea083]){log(_0x3cca5b(0x24b)+_0x5ea083+_0x3cca5b(0x25d),_0x3cca5b(0x1b3));return;}const _0x6a4f26=currentTablesState[_0x5ea083];if(_0x2bb3bd>=_0x6a4f26[_0x3cca5b(0x278)][_0x3cca5b(0x1e9)]){log('AI指令意图更新不存在的行\x20(rowIndex:\x20'+_0x2bb3bd+')，已智能转换为在表格\x20['+_0x6a4f26[_0x3cca5b(0x25c)]+_0x3cca5b(0x1d4),_0x3cca5b(0x258)),insertRow(_0x5ea083,_0x1d5360);return;}const _0x28b09b=_0x6a4f26[_0x3cca5b(0x278)][_0x2bb3bd];for(const _0x4b6844 in _0x1d5360){const _0x1335ed=parseInt(_0x4b6844,0xa);_0x1335ed<_0x28b09b[_0x3cca5b(0x1e9)]&&(_0x28b09b[_0x1335ed]=_0x1d5360[_0x1335ed]);}const _0x3e7ee5=_0x3cca5b(0x275)+_0x6a4f26[_0x3cca5b(0x25c)]+_0x3cca5b(0x1c3)+(_0x2bb3bd+0x1)+_0x3cca5b(0x1c7);log(_0x3e7ee5,_0x3cca5b(0x221));const _0x1c1ec5=getContext();if(_0x1c1ec5[_0x3cca5b(0x267)]&&_0x1c1ec5[_0x3cca5b(0x267)][_0x3cca5b(0x1e9)]>0x0){const _0x134dcd=_0x1c1ec5['chat'][_0x1c1ec5[_0x3cca5b(0x267)][_0x3cca5b(0x1e9)]-0x1];if(saveStateToMessage(currentTablesState,_0x134dcd)){saveChat();return;}}saveChatDebounced();}export function clearAllTables(){const _0x311911=_0x174347;if(!currentTablesState){log(_0x311911(0x24e),'error');return;}currentTablesState[_0x311911(0x207)](_0x284b19=>{const _0x57d3ef=_0x311911;_0x284b19[_0x57d3ef(0x278)]=[];}),log(_0x311911(0x1bb),'warn');const _0x19a767=getContext();if(_0x19a767[_0x311911(0x267)]&&_0x19a767[_0x311911(0x267)][_0x311911(0x1e9)]>0x0){const _0x5e0177=_0x19a767['chat'][_0x19a767[_0x311911(0x267)][_0x311911(0x1e9)]-0x1];if(saveStateToMessage(currentTablesState,_0x5e0177)){saveChat(),log(_0x311911(0x23a),'success'),toastr['success']('所有表格的剧情内容已清空。',_0x311911(0x214));return;}}log(_0x311911(0x229),_0x311911(0x1b3)),saveChatDebounced();}export function convertTablesToCsvString(){const _0x1ae518=_0x174347;!currentTablesState&&loadTables();if(!currentTablesState)return'';let _0x44fa5e='';return currentTablesState[_0x1ae518(0x207)]((_0x5f4621,_0x4166d0)=>{const _0x57df55=_0x1ae518;_0x44fa5e+=_0x57df55(0x22f)+_0x4166d0+':'+_0x5f4621['name']+'\x0a',_0x44fa5e+=_0x57df55(0x235)+(_0x5f4621[_0x57df55(0x27d)]||'无')+'\x0a';const _0x159b43=_0x5f4621[_0x57df55(0x25c)]['replace'](/\s/g,'')+'内容';_0x44fa5e+='<'+_0x159b43+'>\x0a';const _0x15aca8=_0x5f4621[_0x57df55(0x23f)][_0x57df55(0x1cc)]((_0x38c72e,_0x4b1e1d)=>_0x4b1e1d+':'+_0x38c72e)['join'](',');_0x44fa5e+=_0x57df55(0x22e)+_0x15aca8+'\x0a',_0x5f4621['rows'][_0x57df55(0x207)]((_0x56f0e0,_0x32a01d)=>{const _0xa80e58=_0x57df55;if(Array['isArray'](_0x56f0e0)){const _0xed2b25=_0x56f0e0[_0xa80e58(0x1cc)](_0x32fcb8=>{const _0x381d4b=_0xa80e58;return _0x32fcb8===null||_0x32fcb8===undefined||_0x32fcb8===''?'未知':_0x32fcb8[_0x381d4b(0x21a)]();})[_0xa80e58(0x1ba)](',');_0x44fa5e+=_0x32a01d+','+_0xed2b25+'\x0a';}}),_0x44fa5e+='</'+_0x159b43+'>\x0a',_0x44fa5e+=_0x57df55(0x1eb)+(_0x5f4621[_0x57df55(0x237)]||'允许')+'\x0a',_0x44fa5e+=_0x57df55(0x1cb)+(_0x5f4621[_0x57df55(0x257)]||'允许')+'\x0a',_0x44fa5e+=_0x57df55(0x1fd)+(_0x5f4621['rule_update']||'允许')+'\x0a',_0x4166d0<currentTablesState[_0x57df55(0x1e9)]-0x1&&(_0x44fa5e+=_0x57df55(0x20c));}),_0x44fa5e;}export function convertTablesToCsvStringForContentOnly(){const _0x230066=_0x174347,_0x5b6625=getMemoryState();if(!_0x5b6625||_0x5b6625[_0x230066(0x1e9)]===0x0)return'';let _0x7d9a94='';return _0x5b6625[_0x230066(0x207)](_0x3fdff6=>{const _0x56606d=_0x230066;_0x7d9a94+='\x0a<'+_0x3fdff6[_0x56606d(0x25c)]+'>\x0a';const _0xc5fb4=_0x3fdff6[_0x56606d(0x23f)][_0x56606d(0x1cc)]((_0x52ca2c,_0x2e64cd)=>String[_0x56606d(0x1ca)](0x41+_0x2e64cd)+':'+_0x52ca2c)['join'](',');_0x7d9a94+=_0xc5fb4+'\x0a',Array[_0x56606d(0x263)](_0x3fdff6[_0x56606d(0x278)])&&_0x3fdff6[_0x56606d(0x278)]['forEach']((_0xbfc234,_0xf0d34)=>{const _0x41c11e=_0x56606d;if(Array[_0x41c11e(0x263)](_0xbfc234)){const _0x46ac75=_0xbfc234[_0x41c11e(0x1ba)](',');_0x7d9a94+=_0xf0d34+0x1+':'+_0x46ac75+'\x0a';}}),_0x7d9a94+='</'+_0x3fdff6[_0x56606d(0x25c)]+'>\x0a';}),_0x7d9a94[_0x230066(0x1ee)]();}loadTables();export function getBatchFillerRuleTemplate(){const _0xff4d27=_0x174347;return extension_settings[extensionName]?.[_0xff4d27(0x243)]??DEFAULT_AI_RULE_TEMPLATE;}export function saveBatchFillerRuleTemplate(_0xc3e41){const _0x5c176e=_0x174347;extension_settings[extensionName][_0x5c176e(0x243)]=_0xc3e41,saveSettingsDebounced();}export function getBatchFillerFlowTemplate(){const _0x4001f0=_0x174347;return extension_settings[extensionName]?.[_0x4001f0(0x268)]??DEFAULT_AI_FLOW_TEMPLATE;}export function saveBatchFillerFlowTemplate(_0x120dce){extension_settings[extensionName]['batch_filler_flow_template']=_0x120dce,saveSettingsDebounced();}export function getAiFlowTemplateForInjection(){const _0x1bd9ba=_0x174347;return extension_settings[extensionName]?.[_0x1bd9ba(0x20f)]??DEFAULT_AI_FLOW_TEMPLATE;}export async function updateTableFromText(_0x5ac7a6){const _0x4d89be=_0x174347;if(!_0x5ac7a6){log(_0x4d89be(0x21f),_0x4d89be(0x258));return;}const _0x504082=_0x5ac7a6['match'](/<Amily2Edit>([\s\S]*?)<\/Amily2Edit>/);if(!_0x504082||!_0x504082[0x1]){log(_0x4d89be(0x218),_0x4d89be(0x258));return;}let _0x53bb95=_0x504082[0x1]['replace'](/<!--|-->/g,'')[_0x4d89be(0x1ee)]();if(!_0x53bb95){log(_0x4d89be(0x1bd),_0x4d89be(0x221));return;}const _0x2b972d=_0x53bb95['split']('\x0a')[_0x4d89be(0x1ce)](_0xbeff9=>_0xbeff9[_0x4d89be(0x1ee)]()!=='');log(_0x4d89be(0x1cf)+_0x2b972d[_0x4d89be(0x1e9)]+'\x20条表格操作指令...','info');const _0x21ff5b={'insertRow':(_0xff6294,_0x35d841)=>{const _0x1f9040=_0x4d89be;log('执行AI指令:\x20insertRow(tableIndex='+_0xff6294+_0x1f9040(0x24d)+JSON['stringify'](_0x35d841)+')',_0x1f9040(0x221)),insertRow(_0xff6294,_0x35d841);},'deleteRow':(_0x1e4a80,_0x59faff)=>{const _0x324e55=_0x4d89be;log(_0x324e55(0x1e2)+_0x1e4a80+_0x324e55(0x1b0)+_0x59faff+')','info'),deleteRow(_0x1e4a80,_0x59faff);},'updateRow':(_0x431518,_0x1a4aba,_0x2d94d5)=>{const _0x2bfbe7=_0x4d89be;log(_0x2bfbe7(0x1c4)+_0x431518+_0x2bfbe7(0x1b0)+_0x1a4aba+_0x2bfbe7(0x24d)+JSON[_0x2bfbe7(0x279)](_0x2d94d5)+')','info'),updateRow(_0x431518,_0x1a4aba,_0x2d94d5);}};try{const _0x1ad05a=Object[_0x4d89be(0x1d0)](async function(){})[_0x4d89be(0x1ec)],_0x15d6d8=new _0x1ad05a(_0x4d89be(0x24f),_0x4d89be(0x224)+_0x53bb95+_0x4d89be(0x1bf));await _0x15d6d8(_0x21ff5b),log(_0x4d89be(0x1ab),_0x4d89be(0x1e4)),toastr[_0x4d89be(0x1e4)]('已根据AI的指示成功更新表格！','填表完成'),document[_0x4d89be(0x240)](new CustomEvent(_0x4d89be(0x1d1)));}catch(_0x542373){log('执行AI指令时发生错误:\x20'+_0x542373['message'],'error'),toastr[_0x4d89be(0x1b3)](_0x4d89be(0x1db)+_0x542373[_0x4d89be(0x241)],_0x4d89be(0x212));}}export function saveAiTemplate(_0x3d4ef6){const _0x49c97b=_0x174347;extension_settings[extensionName][_0x49c97b(0x20f)]=_0x3d4ef6,saveSettingsDebounced();}export function getAiTemplate(){return getAiFlowTemplateForInjection();}function exportPresetBase(_0x51d1fc=![]){const _0x4ad87c=_0x174347;if(!currentTablesState){log('无法导出：当前表格状态为空。','error'),toastr[_0x4ad87c(0x1b3)]('没有可导出的表格数据。');return;}let _0x16bfb5,_0x1ab8c5,_0x3ba3cf;_0x51d1fc?(_0x16bfb5=JSON[_0x4ad87c(0x25e)](JSON[_0x4ad87c(0x279)](currentTablesState)),_0x1ab8c5=_0x4ad87c(0x25a),_0x3ba3cf='完整备份'):(_0x16bfb5=currentTablesState[_0x4ad87c(0x1cc)](_0x354f05=>({'name':_0x354f05[_0x4ad87c(0x25c)],'headers':_0x354f05[_0x4ad87c(0x23f)],'note':_0x354f05[_0x4ad87c(0x27d)],'rule_add':_0x354f05[_0x4ad87c(0x237)],'rule_delete':_0x354f05[_0x4ad87c(0x257)],'rule_update':_0x354f05[_0x4ad87c(0x259)],'rows':[]})),_0x1ab8c5='Amily2-Table-Preset-v2.0-clean',_0x3ba3cf=_0x4ad87c(0x1da));const _0x4b4fa5={'version':_0x4ad87c(0x1fb),'batchFillerRuleTemplate':getBatchFillerRuleTemplate(),'batchFillerFlowTemplate':getBatchFillerFlowTemplate(),'injectionFlowTemplate':getAiFlowTemplateForInjection(),'tables':_0x16bfb5},_0x2b1017=new Blob([JSON[_0x4ad87c(0x279)](_0x4b4fa5,null,0x2)],{'type':_0x4ad87c(0x20e)}),_0x5449d2=URL[_0x4ad87c(0x1c9)](_0x2b1017),_0x10452a=document[_0x4ad87c(0x1c0)]('a');_0x10452a[_0x4ad87c(0x1cd)]=_0x5449d2,_0x10452a[_0x4ad87c(0x1d9)]=_0x4ad87c(0x1b1)+_0x3ba3cf+'-'+new Date()[_0x4ad87c(0x1c2)]()[_0x4ad87c(0x23b)](0x0,0xa)+_0x4ad87c(0x26c),document[_0x4ad87c(0x1d3)][_0x4ad87c(0x1b6)](_0x10452a),_0x10452a[_0x4ad87c(0x1e8)](),document[_0x4ad87c(0x1d3)][_0x4ad87c(0x1df)](_0x10452a),URL[_0x4ad87c(0x1f9)](_0x5449d2),log('【'+_0x3ba3cf+_0x4ad87c(0x209),_0x4ad87c(0x1e4)),toastr[_0x4ad87c(0x1e4)]('【'+_0x3ba3cf+_0x4ad87c(0x249),_0x4ad87c(0x1e3));}export function exportPreset(){exportPresetBase(![]);}export function exportPresetFull(){exportPresetBase(!![]);}export function importPreset(_0x46e9d8){const _0x430763=_0x174347,_0x873833=document['createElement'](_0x430763(0x1f5));_0x873833['type']='file',_0x873833[_0x430763(0x271)]='.json',_0x873833[_0x430763(0x216)]=_0x5509c4=>{const _0x558b0e=_0x430763,_0x11ea17=_0x5509c4[_0x558b0e(0x23d)][_0x558b0e(0x27b)][0x0];if(!_0x11ea17)return;const _0x2dcdc4=new FileReader();_0x2dcdc4[_0x558b0e(0x245)]=_0x29d9c7=>{const _0x3a831e=_0x558b0e;try{const _0xfe1007=JSON[_0x3a831e(0x25e)](_0x29d9c7[_0x3a831e(0x23d)][_0x3a831e(0x266)]);if(!_0xfe1007[_0x3a831e(0x274)]||!Array['isArray'](_0xfe1007['tables']))throw new Error(_0x3a831e(0x20b));const _0x9c3cd8=window['confirm'](_0x3a831e(0x23c));if(!_0x9c3cd8){log('用户取消了导入操作。',_0x3a831e(0x221)),toastr[_0x3a831e(0x221)](_0x3a831e(0x1fe));return;}if(_0xfe1007[_0x3a831e(0x274)]===_0x3a831e(0x1fb))saveBatchFillerRuleTemplate(_0xfe1007[_0x3a831e(0x205)]),saveBatchFillerFlowTemplate(_0xfe1007[_0x3a831e(0x22d)]),saveAiTemplate(_0xfe1007[_0x3a831e(0x25f)]);else{if(_0xfe1007['aiRuleTemplate']!==undefined&&_0xfe1007[_0x3a831e(0x251)]!==undefined)saveBatchFillerRuleTemplate(_0xfe1007[_0x3a831e(0x1f2)]),saveBatchFillerFlowTemplate(_0xfe1007[_0x3a831e(0x251)]),saveAiTemplate(_0xfe1007[_0x3a831e(0x251)]);else{if(_0xfe1007[_0x3a831e(0x21d)])saveBatchFillerRuleTemplate(''),saveBatchFillerFlowTemplate(_0xfe1007[_0x3a831e(0x21d)]),saveAiTemplate(_0xfe1007['aiTemplate']);else throw new Error('预设中缺少必要的指令模板字段。');}}const _0x442640=_0xfe1007[_0x3a831e(0x250)];_0x442640[_0x3a831e(0x207)](_0x5de337=>{const _0xaa5cc7=_0x3a831e;if(_0x5de337[_0xaa5cc7(0x25c)]===undefined||_0x5de337[_0xaa5cc7(0x23f)]===undefined||_0x5de337[_0xaa5cc7(0x278)]===undefined)throw new Error(_0xaa5cc7(0x256)+JSON['stringify'](_0x5de337));if(_0x5de337[_0xaa5cc7(0x27d)]===undefined)_0x5de337[_0xaa5cc7(0x27d)]='无';if(_0x5de337[_0xaa5cc7(0x237)]===undefined)_0x5de337['rule_add']='允许';if(_0x5de337[_0xaa5cc7(0x257)]===undefined)_0x5de337[_0xaa5cc7(0x257)]='允许';if(_0x5de337[_0xaa5cc7(0x259)]===undefined)_0x5de337[_0xaa5cc7(0x259)]='允许';}),setMemoryState(_0x442640);const _0x318fec=getContext();if(_0x318fec[_0x3a831e(0x267)]&&_0x318fec['chat']['length']>0x0){const _0x1c65b6=_0x318fec[_0x3a831e(0x267)][_0x318fec[_0x3a831e(0x267)][_0x3a831e(0x1e9)]-0x1];saveStateToMessage(getMemoryState(),_0x1c65b6)&&(saveChat(),log(_0x3a831e(0x1b2),'success'));}else saveChatDebounced();log('预设已成功导入并应用。','success'),toastr['success'](_0x3a831e(0x1d6),_0x3a831e(0x213)),typeof _0x46e9d8===_0x3a831e(0x273)&&_0x46e9d8();}catch(_0x8ab390){log(_0x3a831e(0x25b)+_0x8ab390[_0x3a831e(0x241)],_0x3a831e(0x1b3)),toastr['error'](_0x3a831e(0x21e)+_0x8ab390[_0x3a831e(0x241)],'错误');}},_0x2dcdc4[_0x558b0e(0x242)](_0x11ea17);},_0x873833[_0x430763(0x1e8)]();}
